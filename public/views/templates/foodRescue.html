<div ng-hide="frc.gotData" class="ng-hide">
<div id="loader"></div>
</div>
<div class="container" ng-show="frc.gotData">
<h2>Food Rescue Form</h2>

{{cc.filter}}
<!-- Filter Form -->
<div class="row">
  <form>
    org_name
    {{frc.org_name}}
    <div class="form-group col-sm-2">
      <label>Donors:</label>
      <select
         class="form-control"
         ng-options="org.org_name as org.org_name for org in frc.rescueContacts.list | filter: {org_type: 'food_rescue'}"
         ng-model="frc.org_name">
         <option value="" ng-value="">All</option>
      </select>
    </div>

    <div class="form-group col-sm-2">
      <label>Individuals:</label>
      <select
         class="form-control"
         ng-options="type.filter as type.name for type in frc.ind_types"
         ng-model="frc.filter">
      </select>
    </div>

    <div class="form-group col-sm-4">
      <label>Search:</label>
      <input class="form-control" type="search" ng-model="frc.search">
    </div>
  </form>
</div>


<table wt-responsive-table class="table">
  <div class="tableForms">
  <thead class="rescueForm">
    <tr>
      <th>Donor</th>
      <th>Date</th>
      <th ng-repeat="category in frc.rescueCategories.list | filter: {food_rescue: true}">{{category.name}}</th>
      <th></th>
    </tr>
  </thead>
    <tbody>
      <tr>
        <td>
        <select ng-model="frc.newDonation.contact_id" class="form-control">
          <option ng-repeat="contact in frc.rescueContacts.list | filter: 'food_rescue'" value="{{contact.id}}">{{contact.org_name}}</option>
        </select>
      </td>
      <td>
        <input type="date" ng-model="frc.newDonation.timestamp" class="form-control" required>
      </td>
      <td ng-repeat="category in frc.rescueCategories.list | filter: {food_rescue: true}">
        <input type="number" placeholder="# of lbs" ng-model="frc.newDonation.categories[category.id]" class="form-control">
      </td>
    </div>
        <td>
          <button
            type="button"
            class="btn btn-success"
            ng-click="frc.submitDonation()">
            <add-glyph boolean="frc.newDonation.saving"></add-glyph>
          </button>
        </td>
      </tr>

    <tr ng-repeat="donation in frc.rescueDonations.list
    | orderBy: '-timestamp'
    | filter: {org_name: frc.org_name||undefined}
    | filter: frc.search">
        <!-- Donor -->
        <td>
          <span class="form-control"
                disabled ng-if="!donation.editable">{{donation.org_name}}</span>
          <span ng-if="donation.editable">
            <input class="form-control"
                   type="text"
                   ng-model="donation.org_name">
          </span>
        </td>
        <!-- Timestamp -->
        <td>
          <span class="form-control"
                disabled ng-if="!donation.editable">{{donation.timestamp | date: 'MM/dd/yyyy'}}</span>
          <span ng-if="donation.editable">
            <input class="form-control"
                   type="date" value="{{donation.timestamp | date: 'MM/dd/yyyy'}}"
                   ng-model="donation.timestamp" required>
          </span>
        </td>
        <!-- Categories -->
        <td ng-repeat="category in frc.rescueCategories.list | filter: {food_rescue: true}">
          <span class="form-control"
                disabled ng-if="!donation.editable">{{donation.categories[category.id]}}</span>
          <span ng-if="donation.editable">
            <input class="form-control"
                   type="number"
                   ng-model="donation.categories[category.id]">
          </span>
        </td>
        <!-- Edit -->
        <td>
          <!-- Not editable -->
          <span ng-if="!donation.editable">
            <button
                type="button"
                class="btn btn-primary"
                ng-click="frc.toggleEditable(donation)">
              <span class="glyphicon glyphicon-pencil"></span> Edit
            </button>
            <button
              type="button"
              class="btn btn-danger"
              ng-click="frc.deleteDonation(donation)">
              <!-- <span class="glyphicon glyphicon-trash"></span> Delete -->
              <delete-glyph boolean="donation.saving"></delete-glyph>
            </button>
          </span>
          <!-- Editable -->
          <span ng-if="donation.editable">
            <button
                type="button"
                class="btn btn-primary"
                ng-click="frc.editDonation(donation)">
              <save-glyph boolean="donation.saving"></save-glyph>
            </button>
            <button
                type="button"
                class="btn btn-default"
                ng-click="frc.toggleEditable(donation)">
              <span class="glyphicon glyphicon-remove"></span> Cancel
            </button>
          </span>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<!-- </div>
  </div> -->
